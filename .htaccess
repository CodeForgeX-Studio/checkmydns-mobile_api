RewriteEngine On

RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?]
RewriteRule ^ /%1 [R=301,L]

RewriteCond %{THE_REQUEST} \s/+(.+?)\.html[\s?]
RewriteRule ^ /%1 [R=301,L]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L]

DirectoryIndex index.php

ErrorDocument 404 /index.php